angular.module("mooVtrailers",["angular-http-helper"]).run([function(){var e=document.createElement("script");e.src="http://www.youtube.com/iframe_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}]),function(){"use strict";angular.module("mooVtrailers").directive("movieSearchItem",["$rootScope","YouTubeService","MtTheaterService",function(e,t,i){function n(e,n,o,r){e.playQueue=function(){t.getYouTubeIdByMovieItem(e.movie).then(function(e){"No trailer found"!=e&&(r.searchString="",i.theater.showTheater=!0,t.playVideoById(e))})}}return{restrict:"E",link:n,templateUrl:"app/components/movie-search-item/movie-search-item-tpl.html",require:"^mtSearchBar",scope:{movie:"=movie"}}}])}(),function(){"use strict";angular.module("mooVtrailers").directive("mtLogo",[function(){function e(){}return{restrict:"E",link:e,template:'<span class="logo logo__base-text">moo <span class="logo__accent-text">V</span> trailers</span>'}}])}(),function(){"use strict";angular.module("mooVtrailers").directive("mtHeader",[function(){return{restrict:"E",controller:"MtHeaderCtrl",controllerAs:"mtHeader",templateUrl:"app/components/mt-header/mt-header-tpl.html"}}]).controller("MtHeaderCtrl",["MtTheaterService","$scope",function(e,t){t.theater=e.theater}])}(),function(){"use strict";angular.module("mooVtrailers").directive("mtPopularTitles",[function(){return{restrict:"E",controller:"MtPopularTitlesCtrl",controllerAs:"mtPopularTitles",templateUrl:"app/components/mt-popular-titles/mt-popular-titles-tpl.html"}}]).controller("MtPopularTitlesCtrl",["RottenTomatoesService",function(e){var t=this;e.getUpcomingMovies().then(function(e){t.upcomingMovies=e.data.movies})}])}(),function(){"use strict";angular.module("mooVtrailers").directive("mtSearchBar",[function(){return{restrict:"E",controller:"MtSearchBarCtrl",controllerAs:"mtSearchBar",bindToController:!0,templateUrl:"app/components/mt-search-bar/mt-search-bar-tpl.html"}}]).controller("MtSearchBarCtrl",["RottenTomatoesService","$scope",function(e,t){function i(){e.getMoviesByQuery(n.searchString).then(function(e){n.movies=e.data.movies})}var n=this;n.searchString="",n.search=i}])}(),function(){"use strict";angular.module("mooVtrailers").directive("mtTheater",[function(){return{restrict:"E",controller:"MtTheaterCtrl",controllerAs:"mtTheater",templateUrl:"app/components/mt-theater/mt-theater-tpl.html"}}]).controller("MtTheaterCtrl",["$scope","MtTheaterService",function(e,t){var i=this;i.theater=t.theater,e.$on("play-queue",function(e,t){i.thing="thing"})}])}(),function(){"use strict";function e(){return{theater:{showTheater:!1,noTrailerAvailable:!1,searchOnTop:!1}}}angular.module("mooVtrailers").factory("MtTheaterService",e)}(),function(){"use strict";function e(e){function t(t){return e.jsonp("http://api.rottentomatoes.com/api/public/v1.0/movies.json?apikey=u89xcs2pkzy49hwmf9f43j8y&q="+t+"&page_limit=4&callback=JSON_CALLBACK",!0,"movie-query")}function i(){return e.jsonp("http://api.rottentomatoes.com/api/public/v1.0/lists/movies/upcoming.json?apikey=u89xcs2pkzy49hwmf9f43j8y&callback=JSON_CALLBACK",!0,"upcoming-movies")}return{getMoviesByQuery:t,getUpcomingMovies:i}}angular.module("mooVtrailers").factory("RottenTomatoesService",e),e.$inject=["HttpHelper"]}(),function(){"use strict";function e(e,t){function i(t){return e.jsonp("https://www.googleapis.com/youtube/v3/search?part=snippet&q="+t+"&key=AIzaSyCcE9Fjlo5d-4gpRJkZ97a7KFB2k8pvcaM&callback=JSON_CALLBACK",!0,"youtube-query")}function n(e){var t=e.title+" ("+e.year+") trailer";return i(t).then(function(t){return o(e,t)})}function o(e,t){for(var i=t.data.items,n=0;n<i.length;n++){var o=i[n].snippet.title.toLowerCase();if(o.includes(e.title.toLowerCase())&&o.includes(e.year.toString().toLowerCase())&&o.includes("trailer"))return i[n].id.videoId}return"No trailer found"}function r(e){c.loadVideoById(e)}function a(){t.onYouTubeIframeAPIReady=function(){c=new YT.Player("player",{height:"390",width:"640"})}}var c;return a(),{getYouTubeByQuery:i,getYouTubeIdByMovieItem:n,playVideoById:r}}angular.module("mooVtrailers").factory("YouTubeService",e),e.$inject=["HttpHelper","$window"]}(),function(){"use strict";angular.module("mooVtrailers").directive("mtPopularTitle",["YouTubeService","MtTheaterService",function(e,t){function i(i,n,o){i.playTrailer=function(){e.getYouTubeIdByMovieItem(i.upcomingMovie).then(function(i){"No trailer found"!=i&&(t.theater.searchOnTop=!0,t.theater.showTheater=!0,e.playVideoById(i))})}}return{restrict:"E",link:i,scope:{upcomingMovie:"=upcomingMovie"},templateUrl:"app/components/mt-popular-titles/mt-popular-title/mt-popular-title-tpl.html"}}])}(),function(){"use strict";angular.module("mooVtrailers").directive("youtubePlayer",["$window","$rootScope",function(e,t){function i(t,i,n){function o(){a.stopVideo()}function r(e){a.loadVideoById(e)}t.loadNewVideo=r,t.$on("play-queue",function(e,t){r(t)});var a;e.onPlayerReady=function(e){};var c=!1;e.onPlayerStateChange=function(e){e.data!=YT.PlayerState.PLAYING||c||(setTimeout(o,6e3),c=!0)}}return{restrict:"E",link:i,template:'<section id="player"></section>'}}])}(),angular.module("mooVtrailers").run(["$templateCache",function(e){e.put("app/components/movie-search-item/movie-search-item-tpl.html",'<section class="mt-container mt-container--gray movie-search-item">\n    <div class="mt-poster" ng-click="playQueue()">\n        <i class="fa fa-play-circle icon__clickable--white"></i>\n        <img width="75px" height="110px" ng-src="{{movie.posters.original}}">\n    </div>\n    <div class="movie-search-item__details">\n        <div class="heading-4">{{movie.title}} ({{movie.year}}) </div>\n\n        <div class="movie-search-item__synopsis">\n            <span ng-if="movie.synopsis">\n                {{movie.synopsis}}\n            </span>\n            <span ng-if="!movie.synopsis">\n                (No synopsis available)\n            </span>\n        </div>\n    </div>\n    <div class="movie-search-item__last-section">\n        <div class="flex-end-to-end">\n            <div class="movie-search-item__mpaa-rating">{{movie.mpaa_rating}}</div>\n            <div class="movie-search-item__add icon__clickable--white">\n                <i class="fa fa-plus-circle"></i>\n            </div>\n        </div>\n\n        <div class="movie-search-item__ratings">\n            <!--CRITICS RATING-->\n            <div class="icon"\n                 ng-class="{\'icon--tomato\' : movie.ratings.critics_rating == \'Fresh\', \'icon--rotten-tomato\' : movie.ratings.critics_rating == \'Rotten\', \'icon--certified-fresh\' : movie.ratings.critics_rating == \'Certified Fresh\'}"\n                 ng-if="movie.ratings.critics_score != -1">\n            </div>\n            <div class="movie-search-item__rating-percent" ng-if="movie.ratings.critics_score != -1"> {{movie.ratings.critics_score}}%</div>\n\n            <!--AUDIENCE RATING-->\n            <div class="icon icon--popcorn"\n                 ng-class="{\'icon--popcorn\' : movie.ratings.audience_rating == \'Upright\', \'icon--tipped-popcorn\' : movie.ratings.audience_rating == \'Spilled\'}"\n                 ng-if="movie.ratings.audience_score != -1"></div>\n            <div class="movie-search-item__rating-percent" ng-if="movie.ratings.audience_score != -1">{{movie.ratings.audience_score}}%</div>\n        </div>\n    </div>\n\n</section>'),e.put("app/components/mt-header/mt-header-tpl.html",'<section class="mt-header"\n         ng-class="{\'header--flex\' : theater.searchOnTop}">\n    <mt-logo></mt-logo>\n    <mt-search-bar></mt-search-bar>\n</section>'),e.put("app/components/mt-search-bar/mt-search-bar-tpl.html",'<section class="mt-search-bar" ng-class="{\'absolute-center\': !theater.searchOnTop}">\n    <!--Search Input-->\n    <h1 ng-if="!theater.searchOnTop">Search Movie Trailers</h1>\n    <input autofocus\n           class="input__main--large"\n           type="text"\n           ng-model="mtSearchBar.searchString"\n           placeholder="Enter Title"\n           ng-change="theater.searchOnTop = true; mtSearchBar.search()">\n\n    <!--Movie Trailer Search Results-->\n    <section class="mt-search-results__container" ng-if="mtSearchBar.searchString != \'\'">\n        <div class="mt-container__spacer" ng-repeat="movie in mtSearchBar.movies">\n            <movie-search-item movie="movie"></movie-search-item>\n        </div>\n    </section>\n</section>'),e.put("app/components/mt-popular-titles/mt-popular-titles-tpl.html",'<section class="layout__inner-padding--small">\n    <h2>Upcoming Movies</h2>\n    <section class="mt-popular-titles__container">\n\n        <div ng-repeat="upcomingMovie in mtPopularTitles.upcomingMovies" >\n            <mt-popular-title upcoming-movie="upcomingMovie"></mt-popular-title>\n        </div>\n    </section>\n</section>'),e.put("app/components/mt-theater/mt-theater-tpl.html",'<section class="mt-video-container">\n    <div ng-show="mtTheater.theater.showTheater">\n        <section id="player"></section>\n    </div>\n</section>'),e.put("app/components/mt-popular-titles/mt-popular-title/mt-popular-title-tpl.html",'<section class="mt-poster-container mt-poster card-1"\n         ng-click="playTrailer()"\n         ng-mouseover="showTitle = true;"\n         ng-mouseout="showTitle = false;">\n    <div class="mt-popular-title__title" ng-show="showTitle">{{upcomingMovie.title}}</div>\n    <i class="fa fa-play-circle icon__clickable--white"></i>\n    <img width="75px" height="110px" ng-src="{{upcomingMovie.posters.original}}">\n</section>')}]);
//# sourceMappingURL=mooVtrailers.1.0.0-0.min.js.map
